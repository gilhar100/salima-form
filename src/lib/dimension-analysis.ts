
import { questions } from "@/data/questions";
import { getAdjustedValue } from "@/lib/calculations";

// ×¤×•× ×§×¦×™×” ×œ×”×¢×¨×›×ª ×¨×ž×ª ×”×‘×™×¦×•×¢ ×¢× ×ª×™××•×¨×™× ×ž×¤×•×¨×˜×™×
export const evaluateDimensionLevel = (score: number) => {
  if (score >= 4.5) return {
    level: "×ž×¦×•×™×Ÿ",
    description: "×‘×™×¦×•×¢ ×™×•×¦× ×“×•×¤×Ÿ ×•×ž×¢×•×œ×”",
    percentage: 100
  };
  if (score >= 3.7) return {
    level: "×’×‘×•×”",
    description: "×‘×™×¦×•×¢ ×˜×•×‘ ×¢× ×¤×•×˜× ×¦×™××œ ×œ×”×ž×©×š ×¤×™×ª×•×—",
    percentage: 80
  };
  if (score >= 2.7) return {
    level: "×‘×™× ×•× ×™",
    description: "",
    percentage: 60
  };
  if (score >= 1.7) return {
    level: "× ×ž×•×š",
    description: "×–×§×•×§ ×œ×¤×™×ª×•×— ×•×—×™×–×•×§ ×ž×™×™×“×™",
    percentage: 40
  };
  return {
    level: "× ×ž×•×š ×ž××•×“",
    description: "×“×•×¨×© ×”×ª×¢×¨×‘×•×ª ×ž×™×™×“×™×ª ×•×¤×™×ª×•×— ×ž×¢×ž×™×§",
    percentage: 20
  };
};

// ×¤×•× ×§×¦×™×” ×œ×§×‘×œ×ª ×¢×•×¦×ž×ª ×¦×‘×¢ ×‘×”×ª×× ×œ×¦×™×•×Ÿ
export const getColorIntensity = (score: number, baseColors: any) => {
  const normalizedScore = Math.max(0, Math.min(5, score)) / 5;
  
  if (normalizedScore >= 0.9) return baseColors.strongest;
  if (normalizedScore >= 0.75) return baseColors.strong;
  if (normalizedScore >= 0.55) return baseColors.medium;
  if (normalizedScore >= 0.35) return baseColors.weak;
  return baseColors.weakest;
};

// ×¤×•× ×§×¦×™×” ×œ× ×™×ª×•×— ×ž×¤×•×¨×˜ ×©×œ ×ª×©×•×‘×•×ª
const analyzeSpecificAnswers = (dimension: string, answersForDimension: { questionId: number; value: number }[]): string => {
  console.log(`Analyzing dimension ${dimension} with ${answersForDimension.length} answers:`, answersForDimension);
  
  if (answersForDimension.length === 0) {
    return "×œ× ×–×•×”×• ×ª×©×•×‘×•×ª ×¨×œ×•×•× ×˜×™×•×ª ×œ×ž×ž×“ ×–×”. ×× × ×•×“× ×©×”×©××œ×•×Ÿ ×”×•×©×œ× ×‘×ž×œ×•××•.";
  }

  // ×ž×™×•×Ÿ ×”×ª×©×•×‘×•×ª ×œ×¤×™ ×¦×™×•×Ÿ ×ž×•×ª×× (×œ××—×¨ ×”×ª××ž×” ×œ×©××œ×•×ª ×”×¤×•×›×•×ª)
  const processedAnswers = answersForDimension
    .map(answer => {
      const question = questions.find(q => q.id === answer.questionId);
      const adjustedValue = getAdjustedValue(answer.value, question?.isReversed || false);
      
      console.log(`Question ${answer.questionId}: original=${answer.value}, adjusted=${adjustedValue}, reversed=${question?.isReversed}`);
      
      return {
        questionId: answer.questionId,
        text: question?.text || `×©××œ×” ${answer.questionId}`,
        originalValue: answer.value,
        adjustedValue,
        isReversed: question?.isReversed || false
      };
    })
    .sort((a, b) => b.adjustedValue - a.adjustedValue);

  let analysis = "";

  // ×—×œ×•×§×” ×œ×§×˜×’×•×¨×™×•×ª ×¢×œ ×‘×¡×™×¡ ×”×¦×™×•×Ÿ ×”×ž×•×ª××
  const strongAreas = processedAnswers.filter(a => a.adjustedValue >= 4);
  const moderateAreas = processedAnswers.filter(a => a.adjustedValue >= 3 && a.adjustedValue < 4);
  const developmentAreas = processedAnswers.filter(a => a.adjustedValue < 3);

  console.log(`Strong: ${strongAreas.length}, Moderate: ${moderateAreas.length}, Development: ${developmentAreas.length}`);

  // × ×™×ª×•×— ×”×ª×—×•×ž×™× ×”×—×–×§×™×
  if (strongAreas.length > 0) {
    analysis += "**ðŸŒŸ ×ª×—×•×ž×™ ×—×•×–×§×”:**\n";
    strongAreas.forEach((area) => {
      const insight = getSpecificInsight(area.text, dimension, area.adjustedValue, 'strength');
      analysis += `â€¢ ${insight}\n`;
    });
    analysis += "\n";
  }

  // × ×™×ª×•×— ×”×ª×—×•×ž×™× ×”×‘×™× ×•× ×™×™×
  if (moderateAreas.length > 0) {
    analysis += "**âš–ï¸ ×ª×—×•×ž×™× ×‘×™× ×•× ×™×™×:**\n";
    moderateAreas.forEach((area) => {
      const insight = getSpecificInsight(area.text, dimension, area.adjustedValue, 'moderate');
      analysis += `â€¢ ${insight}\n`;
    });
    analysis += "\n";
  }

  // × ×™×ª×•×— ×ª×—×•×ž×™ ×¤×™×ª×•×—
  if (developmentAreas.length > 0) {
    analysis += "**ðŸŽ¯ ×ª×—×•×ž×™× ×œ×©×™×¤×•×¨:**\n";
    developmentAreas.forEach((area) => {
      const insight = getSpecificInsight(area.text, dimension, area.adjustedValue, 'development');
      analysis += `â€¢ ${insight}\n`;
    });
  }

  return analysis.trim();
};

// ×¤×•× ×§×¦×™×” ×œ×§×‘×œ×ª ×ª×•×‘× ×” ×¡×¤×¦×™×¤×™×ª ×‘×”×ª×‘×¡×¡ ×¢×œ ×ª×•×›×Ÿ ×”×©××œ×” ×•×¨×ž×ª ×”×‘×™×¦×•×¢
const getSpecificInsight = (questionText: string, dimension: string, score: number, category: 'strength' | 'moderate' | 'development'): string => {
  // ×ž×™×¤×•×™ ×ž×™×œ×•×ª ×ž×¤×ª×— ×œ×ª×•×‘× ×•×ª ×¡×¤×¦×™×¤×™×•×ª ×œ×›×œ ×ž×ž×“
  const keywordInsights = {
    'S': {
      '×—×–×•×Ÿ': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×¤×™×ª×•×— ×•× ×™×¡×•×— ×—×–×•×Ÿ ××¡×˜×¨×˜×’×™ ×‘×¨×•×¨ ×•×ž×¢×•×¨×¨ ×”×©×¨××”',
        moderate: '×™×© ×‘×¡×™×¡ ×˜×•×‘ ×œ×¤×™×ª×•×— ×—×–×•×Ÿ ××š ×™×© ×ž×§×•× ×œ×—×™×–×•×§ ×”×‘×”×™×¨×•×ª ×•×”×¢×•×¦×ž×”',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×™×›×•×œ×ª × ×™×¡×•×— ×—×–×•×Ÿ ××¡×˜×¨×˜×’×™ ×‘×¨×•×¨ ×•×ž×©×›× ×¢'
      },
      '×ª×›× ×•×Ÿ': {
        strength: '×™×›×•×œ×ª ×ž×¦×•×™× ×ª ×œ×ª×›× ×•×Ÿ ××¡×˜×¨×˜×’×™ ××¨×•×š ×˜×•×•×— ×•×œ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×ž×‘×•×¡×¡×•×ª × ×ª×•× ×™×',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×ª×›× ×•×Ÿ ××¨×•×š ×˜×•×•×— ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×•×ž×§ ×”××¡×˜×¨×˜×’×™',
        development: '×—×•×‘×” ×œ×¤×ª×— ×›×™×©×•×¨×™ ×ª×›× ×•×Ÿ ××¡×˜×¨×˜×’×™ ×•×™×›×•×œ×ª ×¨××™×™×” ××¨×•×›×ª ×˜×•×•×—'
      },
      '×©×™× ×•×™': {
        strength: '×’×ž×™×©×•×ª ×ž×—×©×‘×ª×™×ª ×ž×¢×•×œ×” ×•×™×›×•×œ×ª ×ž×¢×•×¨×¨×ª ×”×©×¨××” ×œ×”×ª×ž×•×“×“ ×¢× ×©×™× ×•×™×™× ×ž×•×¨×›×‘×™×',
        moderate: '×™×›×•×œ×ª ×˜×•×‘×” ×œ×”×ª×ž×•×“×“ ×¢× ×©×™× ×•×™×™× ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×’×ž×™×©×•×ª ×”××¡×˜×¨×˜×’×™×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×”×•×‘×™×œ ×©×™× ×•×™×™× ×•×œ×”×ª×ž×•×“×“ ×¢× ××™-×•×“××•×ª'
      },
      '×”×—×œ×˜×•×ª': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×ž×‘×•×¡×¡×•×ª ×•×ž×—×•×©×‘×•×ª ×‘×ž×¦×‘×™× ×ž×•×¨×›×‘×™×',
        moderate: '×™×›×•×œ×ª ×¡×‘×™×¨×” ×œ×§×‘×œ×ª ×”×—×œ×˜×•×ª ××š ×™×© ×ž×§×•× ×œ×©×™×¤×•×¨ ×”×ª×”×œ×™×š',
        development: '× ×“×¨×© ×—×™×–×•×§ ×ž×©×ž×¢×•×ª×™ ×‘×ª×”×œ×™×›×™ ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×•× ×™×ª×•×— ×ž×¦×‘×™× ×ž×•×¨×›×‘×™×'
      },
      '××¡×˜×¨×˜×’×™': {
        strength: '×—×©×™×‘×” ××¡×˜×¨×˜×’×™×ª ×ž×¤×•×ª×—×ª ×•×™×›×•×œ×ª ×œ×¨××•×ª ×”×ª×ž×•× ×” ×”×¨×—×‘×”',
        moderate: '×™×›×•×œ×ª ×—×©×™×‘×” ××¡×˜×¨×˜×’×™×ª ×‘×¡×™×¡×™×ª ×¢× ×¤×•×˜× ×¦×™××œ ×œ×¤×™×ª×•×—',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×—×©×™×‘×” ××¡×˜×¨×˜×’×™×ª ×•×¨××™×™×” ×›×•×œ×œ×ª'
      }
    },
    'L': {
      '×œ×ž×™×“×”': {
        strength: '×ž×—×•×™×‘×•×ª ×—×–×§×” ×œ×œ×ž×™×“×” ×ž×ª×ž×©×›×ª ×•×¤×™×ª×•×— ×¢×¦×ž×™ ×ž×ª×ž×©×š',
        moderate: '×ž×—×•×™×‘×•×ª ×‘×¡×™×¡×™×ª ×œ×œ×ž×™×“×” ××š × ×™×ª×Ÿ ×œ×”×¢×ž×™×§ ××ª ×”×©×™×˜×ª×™×•×ª ×•×”×¢×§×‘×™×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×ª×¨×‘×•×ª ×œ×ž×™×“×” ××™×©×™×ª ×•×ž×—×•×™×‘×•×ª ×œ×¤×™×ª×•×— ×ž×ª×ž×©×š'
      },
      '×¨×¢×™×•× ×•×ª': {
        strength: '×¡×§×¨× ×•×ª ××™× ×˜×œ×§×˜×•××œ×™×ª ×’×‘×•×”×” ×•×¤×ª×™×—×•×ª ×ž×¢×•×œ×” ×œ×¨×¢×™×•× ×•×ª ×—×“×©×™× ×•×œ×—×“×©× ×•×ª',
        moderate: '×¤×ª×™×—×•×ª ×‘×¡×™×¡×™×ª ×œ×¨×¢×™×•× ×•×ª ×—×“×©×™× ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¡×§×¨× ×•×ª ×”××§×˜×™×‘×™×ª',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×¤×ª×™×—×•×ª ×œ×¨×¢×™×•× ×•×ª ×—×“×©×™× ×•×‘×¡×§×¨× ×•×ª ××™× ×˜×œ×§×˜×•××œ×™×ª'
      },
      '×©××œ×•×ª': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×©××•×œ ×©××œ×•×ª ×—×©×•×‘×•×ª ×•×¢×ž×•×§×•×ª ×”×ž× ×™×¢×•×ª ×œ×ž×™×“×” ×•×—×“×©× ×•×ª',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×©××•×œ ×©××œ×•×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×•×ž×§ ×•×”×ž×™×§×•×“',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×©××•×œ ×©××œ×•×ª ×ž×”×•×ª×™×•×ª ×•×ž×¢×•×¨×¨×•×ª ×—×©×™×‘×”'
      },
      '×¢×–×¨×”': {
        strength: '× ×›×•× ×•×ª ×ž×¢×•×œ×” ×œ×¤× ×•×ª ×œ×¢×–×¨×” ×•×œ×”×™×¢×–×¨ ×‘×™×“×¢ ×•×‘× ×™×¡×™×•×Ÿ ×©×œ ××—×¨×™×',
        moderate: '×ž×•×“×¢×•×ª ×œ×¦×•×¨×š ×‘×¢×–×¨×” ××š ×œ×¤×¢×ž×™× ×§×©×™×™× ×œ×¤× ×•×ª ×œ××—×¨×™×',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×‘×™×›×•×œ×ª ×œ×–×”×•×ª ×ž×ª×™ × ×“×¨×©×ª ×¢×–×¨×” ×•×œ×¤× ×•×ª ×œ×§×‘×œ×ª×”'
      },
      '×˜×¢×•×™×•×ª': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×œ×ž×•×“ ×ž×˜×¢×•×™×•×ª ×•×œ×”×¤×•×š ××•×ª×Ÿ ×œ×”×–×“×ž× ×•×™×•×ª ×¦×ž×™×—×”',
        moderate: '×ž×•×“×¢×•×ª ×œ×œ×ž×™×“×” ×ž×˜×¢×•×™×•×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×ž×§ ×•×”×™×™×©×•×',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×œ×ž×•×“ ×ž×˜×¢×•×™×•×ª ×•×œ×¨××•×ª ×‘×”×Ÿ ×”×–×“×ž× ×•×™×•×ª ×œ×¦×ž×™×—×”'
      },
      '×‘×™×§×•×¨×ª': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×§×‘×œ ×‘×™×§×•×¨×ª ×•×œ×”×©×ª×ž×© ×‘×” ×œ×©×™×¤×•×¨ ×•×¤×™×ª×•×—',
        moderate: '×¤×ª×™×—×•×ª ×‘×¡×™×¡×™×ª ×œ×‘×™×§×•×¨×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×™×›×•×œ×ª ×œ×”×©×ª×ž×© ×‘×” ×‘×¦×•×¨×” ×‘×•× ×”',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×‘×™×›×•×œ×ª ×œ×§×‘×œ ×‘×™×§×•×¨×ª ×•×œ×”×¤×•×š ××•×ª×” ×œ×›×œ×™ ×œ×¦×ž×™×—×”'
      }
    },
    'I': {
      '×”×©×¨××”': {
        strength: '×™×›×•×œ×ª ×˜×‘×¢×™×ª ×•×—×–×§×” ×œ×”×¢× ×™×§ ×”×©×¨××” ×œ××—×¨×™× ×•×œ×™×¦×•×¨ ×—×–×•×Ÿ ×ž×©×•×ª×£',
        moderate: '×¤×•×˜× ×¦×™××œ ×œ×”×¢× ×™×§ ×”×©×¨××” ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×›×¨×™×–×ž×” ×•×”×ž×¡×¨',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×”×¢× ×™×§ ×”×©×¨××” ×•×œ×”× ×™×¢ ×× ×©×™× ×¡×‘×™×‘ ×—×–×•×Ÿ ×ž×©×•×ª×£'
      },
      '×“×•×’×ž×”': {
        strength: '×ž×”×•×•×” ×“×•×’×ž×” ××™×©×™×ª ×ž×¢×•×¨×¨×ª ×”×©×¨××” ×•×¤×•×¢×œ ×‘×”×ª×× ×œ×¢×¨×›×™×',
        moderate: '×‘×¡×™×¡ ×˜×•×‘ ×œ×”×™×•×ª ×“×•×’×ž×” ××™×©×™×ª ××š × ×™×ª×Ÿ ×œ×—×–×§ ××ª ×”×¢×§×‘×™×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×”×™×•×ª ×“×•×’×ž×” ××™×©×™×ª ×•×œ×”×•×‘×™×œ ×‘××ž×¦×¢×•×ª ×ž×¢×©×”'
      },
      '×ž×•×˜×™×‘×¦×™×”': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×”× ×™×¢ ×•×œ×”×œ×”×™×‘ ×× ×©×™× ×œ×™×¦×™×¨×ª ×‘×™×¦×•×¢×™× ×’×‘×•×”×™×',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×”× ×™×¢ ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×›×•×— ×”×ž× ×™×¢',
        development: '×—×•×‘×” ×œ×¤×ª×— ×›×™×©×•×¨×™ ×”× ×¢×” ×•×™×›×•×œ×ª ×œ×¢×•×¨×¨ ×ž×•×˜×™×‘×¦×™×” ×’×‘×•×”×” ×‘××—×¨×™×'
      },
      '×× ×¨×’×™×”': {
        strength: '×ž×§×¨×™×Ÿ ×× ×¨×’×™×” ×—×™×•×‘×™×ª ×•×× ×ª×•×–×™××–× ×ž×“×‘×§×™× ×”×ž×©×¤×™×¢×™× ×¢×œ ×›×œ ×”×¡×‘×™×‘×”',
        moderate: '×× ×¨×’×™×” ×—×™×•×‘×™×ª ×‘×¡×™×¡×™×ª ××š × ×™×ª×Ÿ ×œ×—×–×§ ××ª ×”×”×©×¤×¢×” ×¢×œ ×”×¡×‘×™×‘×”',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×‘×™×›×•×œ×ª ×œ×”×§×¨×™×Ÿ ×× ×¨×’×™×” ×—×™×•×‘×™×ª ×•×œ×”×“×‘×™×§ ××—×¨×™×'
      },
      '×× ×ª×•×–×™××–×': {
        strength: '×× ×ª×•×–×™××–× ×ž×“×‘×§ ×”×ž×¢×•×¨×¨ ×”×ª×œ×”×‘×•×ª ×•×ž×¢×•×¨×‘×•×ª ×‘××—×¨×™×',
        moderate: '×× ×ª×•×–×™××–× ×‘×¡×™×¡×™ ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×‘×™×˜×•×™ ×•×”×¢×•×¦×ž×”',
        development: '×—×•×‘×” ×œ×¤×ª×— ×× ×ª×•×–×™××–× ×•×™×›×•×œ×ª ×œ×”×“×‘×™×§ ××—×¨×™× ×‘×”×ª×œ×”×‘×•×ª'
      },
      '×—×–×•×Ÿ': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×”×¢×‘×™×¨ ×—×–×•×Ÿ ×‘××•×¤×Ÿ ×ž×©×›× ×¢ ×•×ž×¢×•×¨×¨ ×”×©×¨××”',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×”×¢×‘×™×¨ ×—×–×•×Ÿ ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×›×•×— ×”×ž×©×›× ×¢',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×‘×™×›×•×œ×ª ×œ×”×¢×‘×™×¨ ×—×–×•×Ÿ ×‘××•×¤×Ÿ ×ž×¢×•×¨×¨ ×”×©×¨××” ×•×ž× ×™×¢'
      }
    },
    'M': {
      '×ž×©×ž×¢×•×ª': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×™×¦×•×¨ ×ª×—×•×©×ª ×ž×©×ž×¢×•×ª ×•×œ×—×‘×¨ ×× ×©×™× ×œ×ž×˜×¨×” ×’×“×•×œ×”',
        moderate: '×ž×•×“×¢×•×ª ×œ×ž×©×ž×¢×•×ª ××š × ×™×ª×Ÿ ×œ×—×–×§ ××ª ×”×™×›×•×œ×ª ×œ×ª×¨×’× ××•×ª×” ×œ×¤×¢×•×œ×”',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×™×¦×•×¨ ×ª×—×•×©×ª ×ž×©×ž×¢×•×ª ×•×ž×˜×¨×” ×‘×¨×•×¨×” ×‘×¢×‘×•×“×”'
      },
      '×¢×¨×›×™×': {
        strength: '×ž×—×•×™×‘×•×ª ×—×–×§×” ×œ×¢×¨×›×™× ×•×¤×¢×•×œ×” ×¢×§×‘×™×ª ×‘×”×ª×× ×œ×”× ×‘×›×œ ×”×ž×¦×‘×™×',
        moderate: '×‘×¡×™×¡ ×¢×¨×›×™ ×˜×•×‘ ××š × ×™×ª×Ÿ ×œ×—×–×§ ××ª ×”×‘×™×˜×•×™ ×•×”×™×™×©×•× ×”×ž×¢×©×™',
        development: '×—×•×‘×” ×œ×¤×ª×— ×‘×”×™×¨×•×ª ×¢×¨×›×™×ª ×•×œ×¤×¢×•×œ ×‘×¢×§×‘×™×•×ª ×œ×¤×™ ×¢×§×¨×•× ×•×ª ×‘×¨×•×¨×™×'
      },
      '×¤×™×ª×•×—': {
        strength: '×”×©×§×¢×” ×ž×¢×•×¨×¨×ª ×”×©×¨××” ×‘×¤×™×ª×•×— ×× ×©×™× ×•×‘×ž×™×ž×•×© ×”×¤×•×˜× ×¦×™××œ ×©×œ×”×',
        moderate: '×ž×•×“×¢×•×ª ×œ×—×©×™×‘×•×ª ×¤×™×ª×•×— ×× ×©×™× ××š × ×™×ª×Ÿ ×œ×”×¢×ž×™×§ ××ª ×”×”×©×§×¢×”',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×”×©×§×™×¢ ×‘×¦×ž×™×—×” ×•×‘×¤×™×ª×•×— ×ž×ª×ž×©×š ×©×œ ××—×¨×™×'
      },
      '×ž×˜×¨×”': {
        strength: '×ž×¦×œ×™×— ×œ×™×¦×•×¨ ×—×™×‘×•×¨ ×¢×ž×•×§ ×•×ž×©×ž×¢×•×ª×™ ×‘×™×Ÿ ×”×× ×©×™× ×œ×ž×˜×¨×ª ×”××¨×’×•×Ÿ',
        moderate: '×ž×•×“×¢×•×ª ×œ×ž×˜×¨×” ××š × ×™×ª×Ÿ ×œ×—×–×§ ××ª ×”×™×›×•×œ×ª ×œ×—×‘×¨ ××œ×™×” ××—×¨×™×',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×—×‘×¨ ×× ×©×™× ×œ×ž×˜×¨×” ×ž×©×•×ª×¤×ª ×•×‘×¨×•×¨×”'
      },
      '×”×“×¨×›×”': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×”×“×¨×™×š ×•×œ×¤×ª×— ××—×¨×™× ×‘××•×¤×Ÿ ×ž×§×¦×•×¢×™ ×•××™×©×™',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×”×“×¨×›×” ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×•×ž×§ ×•×”×ž×§×¦×•×¢×™×•×ª',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×™×›×•×œ×ª ×”×“×¨×›×” ×•×¤×™×ª×•×— ×× ×©×™×'
      },
      '×”×©×¤×¢×”': {
        strength: '×™×›×•×œ×ª ×”×©×¤×¢×” ×—×™×•×‘×™×ª ×ž×¢×•×œ×” ×¢×œ ×¦×ž×™×—×” ×•×¤×™×ª×•×— ×©×œ ××—×¨×™×',
        moderate: '×”×©×¤×¢×” ×—×™×•×‘×™×ª ×‘×¡×™×¡×™×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×•×ž×§ ×•×”×™×¢×™×œ×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×”×©×¤×¢×” ×—×™×•×‘×™×ª ×¢×œ ×¤×™×ª×•×— ×•×¦×ž×™×—×” ×©×œ ××—×¨×™×'
      }
    },
    'A': {
      '×’×ž×™×©×•×ª': {
        strength: '×’×ž×™×©×•×ª ×ž×—×©×‘×ª×™×ª ×•×™×›×•×œ×ª ×”×¡×ª×’×œ×•×ª ×ž×¢×•×œ×” ×œ×©×™× ×•×™×™× ×•×œ××ª×’×¨×™× ×—×“×©×™×',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×”×¡×ª×’×œ×•×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×’×ž×™×©×•×ª ×”×ž×—×©×‘×ª×™×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×’×ž×™×©×•×ª ×ž×—×©×‘×ª×™×ª ×•×™×›×•×œ×ª ×”×¡×ª×’×œ×•×ª ×ž×”×™×¨×” ×•×™×¢×™×œ×”'
      },
      '×©×™×ª×•×£': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×¢×‘×•×“×ª ×¦×•×•×ª ×•×©×™×ª×•×£ ×¤×¢×•×œ×” ××¤×§×˜×™×‘×™',
        moderate: '×™×›×•×œ×ª ×˜×•×‘×” ×œ×©×™×ª×•×£ ×¤×¢×•×œ×” ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×•×ž×§ ×•×”××¤×§×˜×™×‘×™×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×›×™×©×•×¨×™ ×©×™×ª×•×£ ×¤×¢×•×œ×” ×•×¢×‘×•×“×ª ×¦×•×•×ª ×‘×¨×ž×” ×’×‘×•×”×”'
      },
      '×”×§×©×‘×”': {
        strength: '×›×™×©×•×¨×™ ×”×§×©×‘×” ×ž×¢×•×œ×™× ×•×™×›×•×œ×ª ×œ×”×‘×™×Ÿ ×•×œ×§×œ×•×˜ × ×§×•×“×•×ª ×ž×‘×˜ ×ž×’×•×•× ×•×ª',
        moderate: '×™×›×•×œ×ª ×”×§×©×‘×” ×‘×¡×™×¡×™×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×•×ž×§ ×•×”×¨×’×™×©×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×›×™×©×•×¨×™ ×”×§×©×‘×” ×¤×¢×™×œ×” ×•×¨×’×™×©×•×ª ×’×‘×•×”×” ×œ××—×¨×™×'
      },
      '×§×‘×œ×”': {
        strength: '×¤×ª×™×—×•×ª ×ž×¢×•×œ×” ×œ×“×¢×•×ª ×©×•× ×•×ª ×•×™×›×•×œ×ª ×œ×§×‘×œ ×‘×™×§×•×¨×ª ×‘××•×¤×Ÿ ×‘×•×’×¨',
        moderate: '×¤×ª×™×—×•×ª ×‘×¡×™×¡×™×ª ×œ×“×¢×•×ª ×©×•× ×•×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×§×‘×œ×” ×•×”×’×ž×™×©×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×§×‘×œ ×“×¢×•×ª ×©×•× ×•×ª ×•×œ×”×ª×ž×•×“×“ ×¢× ×‘×™×§×•×¨×ª ×‘×¦×•×¨×” ×‘×•× ×”'
      },
      '×¤×ª×™×—×•×ª': {
        strength: '×¤×ª×™×—×•×ª ×ž×—×©×‘×ª×™×ª ×ž×¢×•×œ×” ×œ×¨×¢×™×•× ×•×ª ×•×“×¢×•×ª ×—×“×©×•×ª ×•×©×•× ×•×ª',
        moderate: '×¤×ª×™×—×•×ª ×ž×—×©×‘×ª×™×ª ×‘×¡×™×¡×™×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¡×§×¨× ×•×ª ×•×”×§×‘×œ×”',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×‘×¤×ª×™×—×•×ª ×ž×—×©×‘×ª×™×ª ×•×™×›×•×œ×ª ×œ×§×‘×œ × ×§×•×“×•×ª ×ž×‘×˜ ×©×•× ×•×ª'
      },
      '×©×™× ×•×™': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×”×ª×ž×•×“×“ ×¢× ×©×™× ×•×™ ×•×œ×”×¡×ª×’×œ ×œ×ž×¦×‘×™× ×—×“×©×™×',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×”×ª×ž×•×“×“ ×¢× ×©×™× ×•×™ ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×’×ž×™×©×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×”×ª×ž×•×“×“ ×¢× ×©×™× ×•×™ ×•×œ×”×¡×ª×’×œ ×‘×ž×”×™×¨×•×ª'
      }
    },
    'A2': {
      '×©×§×™×¤×•×ª': {
        strength: '×©×§×™×¤×•×ª ×ž×¢×•×¨×¨×ª ××ž×•×Ÿ ×•×™×›×•×œ×ª ×œ×—×œ×•×§ ×ž×™×“×¢ ×‘××•×¤×Ÿ ×¤×ª×•×— ×•×›× ×”',
        moderate: '× ×˜×™×™×” ×œ×©×§×™×¤×•×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¤×ª×™×—×•×ª ×•×”×›× ×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×©×§×™×¤×•×ª ×•×™×›×•×œ×ª ×œ×—×œ×•×§ ×ž×™×“×¢ ×‘××•×¤×Ÿ ×¤×ª×•×— ×•××ž×™×Ÿ'
      },
      '××—×¨×™×•×ª': {
        strength: '× ×˜×™×œ×ª ××—×¨×™×•×ª ××™×©×™×ª ×ž×¢×•×¨×¨×ª ×›×‘×•×“ ×•×™×›×•×œ×ª ×œ×”×ª×ž×•×“×“ ×¢× ×˜×¢×•×™×•×ª ×‘×‘×’×¨×•×ª',
        moderate: '×ž×•×“×¢×•×ª ×œ××—×¨×™×•×ª ××™×©×™×ª ××š × ×™×ª×Ÿ ×œ×—×–×§ ××ª ×”×™×™×©×•× ×”×ž×¢×©×™',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª × ×˜×™×œ×ª ××—×¨×™×•×ª ××™×©×™×ª ×ž×œ××” ×•×œ×”×›×™×¨ ×‘×˜×¢×•×™×•×ª'
      },
      '××•×ª× ×˜×™×•×ª': {
        strength: '××•×ª× ×˜×™×•×ª ×ž×¢×•×¨×¨×ª ×”×©×¨××” ×•×™×›×•×œ×ª ×œ×”×™×•×ª ××ž×™×ª×™ ×•×›× ×”',
        moderate: '×‘×¡×™×¡ ×©×œ ××•×ª× ×˜×™×•×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×‘×™×˜×•×™ ×”××™×©×™ ×”×›× ×”',
        development: '×—×•×‘×” ×œ×¤×ª×— ××•×ª× ×˜×™×•×ª ×•×™×›×•×œ×ª ×œ×”×™×•×ª ××ž×™×ª×™ ×¢× ×¢×¦×ž×š ×•×¢× ××—×¨×™×'
      },
      '×™×•×©×¨×”': {
        strength: '×™×•×©×¨×” ×ž×•×—×œ×˜×ª ×•×¢×§×‘×™×•×ª ×ž×œ××” ×‘×™×Ÿ ×“×™×‘×•×¨ ×œ×ž×¢×©×” ×‘×›×œ ×”×ž×¦×‘×™×',
        moderate: '×‘×¡×™×¡ ×˜×•×‘ ×©×œ ×™×•×©×¨×” ××š × ×™×ª×Ÿ ×œ×—×–×§ ××ª ×”×¢×§×‘×™×•×ª ×”×ž×¢×©×™×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×•×©×¨×” ×•×¢×§×‘×™×•×ª ×ž×œ××” ×‘×™×Ÿ ×¢×¨×›×™× ×œ×¤×¢×•×œ×•×ª'
      },
      '×›× ×•×ª': {
        strength: '×›× ×•×ª ×ž×•×—×œ×˜×ª ×•×™×›×•×œ×ª ×œ×ª×§×©×¨ ×‘××•×¤×Ÿ ×™×©×™×¨ ×•××ž×™×Ÿ',
        moderate: '× ×˜×™×™×” ×œ×›× ×•×ª ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×‘×™×˜×•×™ ×”×™×©×™×¨ ×•×”×‘×¨×•×¨',
        development: '× ×“×¨×© ×¤×™×ª×•×— ×‘×™×›×•×œ×ª ×œ×”×™×•×ª ×›× ×” ×•×™×©×™×¨ ×‘×ª×§×©×•×¨×ª'
      },
      '××ž×•×Ÿ': {
        strength: '×™×›×•×œ×ª ×ž×¢×•×œ×” ×œ×‘× ×•×ª ×•×œ×©×ž×•×¨ ×¢×œ ××ž×•×Ÿ ×¢× ××—×¨×™×',
        moderate: '×™×›×•×œ×ª ×‘×¡×™×¡×™×ª ×œ×‘× ×™×™×ª ××ž×•×Ÿ ××š × ×™×ª×Ÿ ×œ×¤×ª×— ××ª ×”×¢×•×ž×§ ×•×”×¢×§×‘×™×•×ª',
        development: '×—×•×‘×” ×œ×¤×ª×— ×™×›×•×œ×ª ×œ×‘× ×•×ª ×•×œ×©×ž×•×¨ ×¢×œ ××ž×•×Ÿ ×‘××•×¤×Ÿ ×ž×ª×ž×©×š'
      }
    }
  };

  // ×—×™×¤×•×© ×ª×•×‘× ×” ×¨×œ×•×•× ×˜×™×ª ×¢×œ ×‘×¡×™×¡ ×ž×™×œ×•×ª ×ž×¤×ª×—
  const dimensionInsights = keywordInsights[dimension as keyof typeof keywordInsights];
  if (dimensionInsights) {
    for (const [keyword, insight] of Object.entries(dimensionInsights)) {
      if (questionText.includes(keyword)) {
        return insight[category];
      }
    }
  }

  // ×ª×•×‘× ×•×ª ×›×œ×œ×™×•×ª ×œ×›×œ ×ž×ž×“ ×× ×œ× × ×ž×¦××” ×”×ª××ž×” ×¡×¤×¦×™×¤×™×ª
  const genericInsights = {
    'S': {
      strength: `×™×›×•×œ×ª ××¡×˜×¨×˜×’×™×ª ×ž×¤×•×ª×—×ª - × ×§×•×“×ª ×—×•×–×§×” ×ž×©×ž×¢×•×ª×™×ª ×‘×—×©×™×‘×” ×•×ª×›× ×•×Ÿ ××¨×•×š ×˜×•×•×—`,
      moderate: `×‘×¡×™×¡ ××¡×˜×¨×˜×’×™ ×™×¦×™×‘ ×¢× ×¤×•×˜× ×¦×™××œ ×˜×•×‘ ×œ×¤×™×ª×•×— ×•×”×¢×ž×§×” ×©×œ ×”×—×©×™×‘×” ×”××¡×˜×¨×˜×’×™×ª`,
      development: `×”×–×“×ž× ×•×ª ×œ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×™×›×•×œ×•×ª ×”×—×©×™×‘×” ×”××¡×˜×¨×˜×’×™×ª ×•×”×•×‘×œ×ª ×©×™× ×•×™×™×`
    },
    'L': {
      strength: `×™×›×•×œ×ª ×œ×ž×™×“×” ×ž×¤×•×ª×—×ª - × ×§×•×“×ª ×—×•×–×§×” ×‘×¤×™×ª×•×— ×¢×¦×ž×™ ×•×¦×ž×™×—×” ×ž×ª×ž×©×›×ª`,
      moderate: `×‘×¡×™×¡ ×œ×ž×™×“×” ×™×¦×™×‘ ×¢× ×¤×•×˜× ×¦×™××œ ×œ×¤×™×ª×•×— ×’×™×©×” ×©×™×˜×ª×™×ª ×™×•×ª×¨ ×œ×œ×ž×™×“×”`,
      development: `×”×–×“×ž× ×•×ª ×œ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×ª×¨×‘×•×ª ×œ×ž×™×“×” ×•×¤×™×ª×•×— ×¢×¦×ž×™ ×ž×ª×ž×©×š`
    },
    'I': {
      strength: `×™×›×•×œ×ª ×”×©×¨××” ×ž×¤×•×ª×—×ª - ×›×•×— ×ž× ×™×¢ ×ž×©×ž×¢×•×ª×™ ×œ×”×©×¤×¢×” ×—×™×•×‘×™×ª ×¢×œ ××—×¨×™×`,
      moderate: `×‘×¡×™×¡ ×”×©×¨××” ×™×¦×™×‘ ×¢× ×¤×•×˜× ×¦×™××œ ×œ×¤×™×ª×•×— ×”×›×¨×™×–×ž×” ×•×”×›×•×— ×”×ž×¢×•×¨×¨ ×”×©×¨××”`,
      development: `×”×–×“×ž× ×•×ª ×œ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×™×›×•×œ×ª ×œ×”×¢× ×™×§ ×”×©×¨××” ×•×œ×”× ×™×¢ ××—×¨×™×`
    },
    'M': {
      strength: `×™×›×•×œ×ª ×œ×™×¦×•×¨ ×ž×©×ž×¢×•×ª ×ž×¤×•×ª×—×ª - ×—×•×–×§×” ×‘×—×™×‘×•×¨ ×× ×©×™× ×œ×ž×˜×¨×” ×’×“×•×œ×”`,
      moderate: `×‘×¡×™×¡ ×™×¦×™×‘ ×œ×™×¦×™×¨×ª ×ž×©×ž×¢×•×ª ×¢× ×¤×•×˜× ×¦×™××œ ×œ×¤×™×ª×•×— ×”×¢×•×ž×§ ×•×”×¢×•×¦×ž×”`,
      development: `×”×–×“×ž× ×•×ª ×œ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×™×›×•×œ×ª ×œ×™×¦×•×¨ ×ª×—×•×©×ª ×ž×©×ž×¢×•×ª ×•×ž×˜×¨×”`
    },
    'A': {
      strength: `×™×›×•×œ×ª ×”×¡×ª×’×œ×•×ª ×ž×¤×•×ª×—×ª - ×—×•×–×§×” ×‘×’×ž×™×©×•×ª ×•×¤×ª×™×—×•×ª ×œ×©×™× ×•×™`,
      moderate: `×‘×¡×™×¡ ×”×¡×ª×’×œ×•×ª ×™×¦×™×‘ ×¢× ×¤×•×˜× ×¦×™××œ ×œ×¤×™×ª×•×— ×”×’×ž×™×©×•×ª ×”×ž×—×©×‘×ª×™×ª`,
      development: `×”×–×“×ž× ×•×ª ×œ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘×’×ž×™×©×•×ª ×•×™×›×•×œ×ª ×”×¡×ª×’×œ×•×ª ×œ×ž×¦×‘×™× ×—×“×©×™×`
    },
    'A2': {
      strength: `×™×›×•×œ×ª ××•×ª× ×˜×™×•×ª ×ž×¤×•×ª×—×ª - ×—×•×–×§×” ×‘×™×•×©×¨×” ×•×‘×‘× ×™×™×ª ××ž×•×Ÿ`,
      moderate: `×‘×¡×™×¡ ××•×ª× ×˜×™×•×ª ×™×¦×™×‘ ×¢× ×¤×•×˜× ×¦×™××œ ×œ×¤×™×ª×•×— ×”×©×§×™×¤×•×ª ×•×”×›× ×•×ª`,
      development: `×”×–×“×ž× ×•×ª ×œ×¤×™×ª×•×— ×ž×©×ž×¢×•×ª×™ ×‘××•×ª× ×˜×™×•×ª ×•×™×›×•×œ×ª ×‘× ×™×™×ª ××ž×•×Ÿ`
    }
  };

  const dimensionGeneric = genericInsights[dimension as keyof typeof genericInsights];
  return dimensionGeneric ? dimensionGeneric[category] : `×ª×—×•× ×–×” ×ž×¦×™×’ ${category === 'strength' ? '×—×•×–×§×”' : category === 'moderate' ? '×¤×•×˜× ×¦×™××œ' : '×”×–×“×ž× ×•×ª ×œ×¤×™×ª×•×—'}`;
};

// ×”×¤×•× ×§×¦×™×” ×”×ž×¨×›×–×™×ª ×œ×§×‘×œ×ª × ×™×ª×•×— ×ž×•×ª×× ××™×©×™×ª
export const getPersonalizedAnalysis = (dimension: string, answersForDimension: { questionId: number; value: number }[]) => {
  console.log(`Getting personalized analysis for dimension ${dimension}:`, answersForDimension);
  return analyzeSpecificAnswers(dimension, answersForDimension);
};
